{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// flatpickr\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n// iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// imageUrl\nimport imageUrl from '../img/error.svg';\n\nlet userSelectedDate;\nconst dateTimePickerInput = document.querySelector('#datetime-picker');\nconst startBtnElem = document.querySelector('[data-start]');\nconst daysSpanElem = document.querySelector('[data-days]');\nconst hoursSpanElem = document.querySelector('[data-hours]');\nconst minutesSpanElem = document.querySelector('[data-minutes]');\nconst secondsSpanElem = document.querySelector('[data-seconds]');\nstartBtnElem.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = Date.parse(selectedDates[0]);\n    if (userSelectedDate < Date.now()) {\n      iziToast.error({\n        iconUrl: imageUrl,\n        message: 'Please choose a date in the future',\n        backgroundColor: '#ef4040',\n                       messageColor: '#fff',\n                       messageSize: '16',\n                       imageWidth: 302,\n                       close: true,\n                       closeOnEscape: true,\n                       closeOnClick: true,\n                       progressBar: true,\n                       progressBarColor: '#b51b1b',\n                       transitionIn: 'flipInX',\n                       transitionOut: 'flipOutX',\n                       position: 'topRight',\n                       iconColor: '#FAFAFB',\n      });\n      startBtnElem.disabled = true;\n    } else {\n      startBtnElem.disabled = false;\n    }\n  },\n};\nflatpickr(dateTimePickerInput, options);\n\nfunction startCountdown() {\n  startBtnElem.disabled = true;\n  dateTimePickerInput.disabled = true;\n  const intervalId = setInterval(() => {\n    let timeLeftMs = userSelectedDate - Date.now();\n    \n    \n    const timeLeft = convertMs(timeLeftMs);\n    \n    daysSpanElem.textContent = addLeadingZero(timeLeft.days);\n    hoursSpanElem.textContent = addLeadingZero(timeLeft.hours);\n    minutesSpanElem.textContent = addLeadingZero(timeLeft.minutes);\n    secondsSpanElem.textContent = addLeadingZero(timeLeft.seconds);\n    if (timeLeftMs <= 1000) {\n      clearInterval(intervalId);\n      dateTimePickerInput.disabled = false;\n    }\n  }, 1000);\n}\nfunction convertMs(ms) {\n      \n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  \n  const days = Math.floor(ms / day);\n  \n  const hours = Math.floor((ms % day) / hour);\n \n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  \n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\nstartBtnElem.addEventListener('click', startCountdown);"],"names":["userSelectedDate","dateTimePickerInput","startBtnElem","daysSpanElem","hoursSpanElem","minutesSpanElem","secondsSpanElem","options","selectedDates","iziToast","imageUrl","flatpickr","startCountdown","intervalId","timeLeftMs","timeLeft","convertMs","addLeadingZero","ms","days","hours","minutes","seconds","value"],"mappings":"0IASA,IAAIA,EACJ,MAAMC,EAAsB,SAAS,cAAc,kBAAkB,EAC/DC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAe,SAAS,cAAc,aAAa,EACnDC,EAAgB,SAAS,cAAc,cAAc,EACrDC,EAAkB,SAAS,cAAc,gBAAgB,EACzDC,EAAkB,SAAS,cAAc,gBAAgB,EAC/DJ,EAAa,SAAW,GAExB,MAAMK,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBR,EAAmB,KAAK,MAAMQ,EAAc,CAAC,CAAC,EAC1CR,EAAmB,KAAK,OAC1BS,EAAS,MAAM,CACb,QAASC,EACT,QAAS,qCACT,gBAAiB,UACF,aAAc,OACd,YAAa,KACb,WAAY,IACZ,MAAO,GACP,cAAe,GACf,aAAc,GACd,YAAa,GACb,iBAAkB,UAClB,aAAc,UACd,cAAe,WACf,SAAU,WACV,UAAW,SAClC,CAAO,EACDR,EAAa,SAAW,IAExBA,EAAa,SAAW,EAE3B,CACH,EACAS,EAAUV,EAAqBM,CAAO,EAEtC,SAASK,GAAiB,CACxBV,EAAa,SAAW,GACxBD,EAAoB,SAAW,GAC/B,MAAMY,EAAa,YAAY,IAAM,CACnC,IAAIC,EAAad,EAAmB,KAAK,IAAG,EAG5C,MAAMe,EAAWC,EAAUF,CAAU,EAErCX,EAAa,YAAcc,EAAeF,EAAS,IAAI,EACvDX,EAAc,YAAca,EAAeF,EAAS,KAAK,EACzDV,EAAgB,YAAcY,EAAeF,EAAS,OAAO,EAC7DT,EAAgB,YAAcW,EAAeF,EAAS,OAAO,EACzDD,GAAc,MAChB,cAAcD,CAAU,EACxBZ,EAAoB,SAAW,GAElC,EAAE,GAAI,CACT,CACA,SAASe,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CACA,SAASL,EAAeM,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CACArB,EAAa,iBAAiB,QAASU,CAAc"}